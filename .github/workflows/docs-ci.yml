name: Docs CI Validation

on:
  push:
    paths:
      - "docs/**"
      - ".github/workflows/docs-ci.yml"
      - ".markdownlint.yml"
  pull_request:
    paths:
      - "docs/**"

jobs:
  validate-docs:
    name: Validate Documentation
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Verify docs directory exists
        run: |
          if [ ! -d "docs" ]; then
            echo "‚ùå docs directory not found"
            exit 1
          fi
          echo "‚úÖ docs directory exists"

      - name: List documentation files
        run: |
          echo "üìÑ Documentation files:"
          ls -la docs

      - name: Check required docs files
        run: |
          REQUIRED_FILES=(
            "docs/SECURITY.md"
            "docs/api.md"
            "docs/architecture.md"
            "docs/auth-flow.md"
            "docs/tokenomics.md"
          )

          for file in "${REQUIRED_FILES[@]}"; do
            if [ ! -f "$file" ]; then
              echo "‚ùå Missing required file: $file"
              exit 1
            fi
            echo "‚úÖ Found $file"
          done

      - name: Run MarkdownLint
        uses: DavidAnson/markdownlint-cli2-action@v15
        with:
          config: ".markdownlint.yml"
          globs: |
            docs/**/*.md

      - name: Docs CI passed
        run: echo "üéâ Documentation + MarkdownLint validation successful"
